<!DOCTYPE html>
<html lang="ko" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VoiceTranslate — 음성 번역기</title>
  <meta name="description" content="한국어 음성을 영어, 중국어, 일본어, 불어, 독일어로 실시간 번역하는 AI 음성 번역기" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- ===== HEADER ===== -->
  <header class="header">
    <div class="header-inner">
      <div class="logo">
        <div class="logo-icon">🌐</div>
        <div class="logo-text">
          <span class="logo-brand">VoiceTranslate</span>
          <span class="logo-sub">음성 실시간 번역기</span>
        </div>
      </div>
      <div class="header-actions">
        <button id="historyToggle" class="icon-btn" title="번역 히스토리">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v10l4 4"/><circle cx="12" cy="12" r="10"/></svg>
          <span class="badge" id="historyBadge">0</span>
        </button>
        <button id="favToggle" class="icon-btn" title="즐겨찾기">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
          <span class="badge" id="favBadge">0</span>
        </button>
        <button id="themeToggle" class="icon-btn" title="테마 전환">
          <svg id="themeIcon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
        </button>
      </div>
    </div>
  </header>

  <!-- ===== MAIN CONTENT ===== -->
  <main class="main">

    <!-- === INPUT SECTION === -->
    <section class="input-section">
      <!-- Mode Tabs -->
      <div class="mode-tabs">
        <button class="tab-btn active" id="voiceTab" data-mode="voice">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></svg>
          음성 모드
        </button>
        <button class="tab-btn" id="textTab" data-mode="text">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="17" y1="10" x2="3" y2="10"/><line x1="21" y1="6" x2="3" y2="6"/><line x1="21" y1="14" x2="3" y2="14"/><line x1="17" y1="18" x2="3" y2="18"/></svg>
          타이핑 모드
        </button>
      </div>

      <!-- Voice Mode Panel -->
      <div class="mode-panel" id="voicePanel">
        <div class="mic-container">
          <div class="sound-waves" id="soundWaves">
            <span></span><span></span><span></span><span></span><span></span>
          </div>
          <button class="mic-btn" id="micBtn" title="클릭하여 녹음 시작">
            <div class="mic-ring"></div>
            <div class="mic-ring ring2"></div>
            <svg class="mic-icon" width="36" height="36" viewBox="0 0 24 24" fill="currentColor"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2" fill="none" stroke="currentColor" stroke-width="2"/><line x1="12" y1="19" x2="12" y2="23" stroke="currentColor" stroke-width="2"/><line x1="8" y1="23" x2="16" y2="23" stroke="currentColor" stroke-width="2"/></svg>
          </button>
          <p class="mic-hint" id="micHint">클릭하여 한국어로 말하기</p>
          <div class="mic-status" id="micStatus"></div>
        </div>

        <!-- Recognized Text Display -->
        <div class="recognized-block" id="recognizedBlock" style="display:none">
          <div class="recognized-label">인식된 텍스트</div>
          <div class="recognized-text" id="recognizedText"></div>
          <div class="sentiment-badge" id="sentimentBadge"></div>
        </div>
      </div>

      <!-- Text Mode Panel -->
      <div class="mode-panel hidden" id="textPanel">
        <div class="text-input-wrapper">
          <textarea
            id="textInput"
            class="text-input"
            placeholder="한국어 텍스트를 입력하세요..."
            rows="4"
            maxlength="500"
          ></textarea>
          <div class="text-input-footer">
            <span class="char-count"><span id="charCount">0</span>/500</span>
            <button class="translate-btn" id="translateBtn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
              번역하기
            </button>
          </div>
        </div>
      </div>

      <!-- TTS Controls -->
      <div class="tts-controls" id="ttsControls" style="display:none">
        <div class="tts-control-group">
          <label class="tts-label">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
            속도
          </label>
          <input type="range" id="ttsRate" min="0.5" max="2" step="0.1" value="1" class="slider" />
          <span class="slider-val" id="ttsRateVal">1.0×</span>
        </div>
        <div class="tts-control-group">
          <label class="tts-label">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>
            피치
          </label>
          <input type="range" id="ttsPitch" min="0.5" max="2" step="0.1" value="1" class="slider" />
          <span class="slider-val" id="ttsPitchVal">1.0</span>
        </div>
      </div>
    </section>

    <!-- === TRANSLATION RESULTS === -->
    <section class="results-section" id="resultsSection" style="display:none">
      <div class="results-header">
        <h2 class="results-title">번역 결과</h2>
        <div class="results-actions">
          <button class="action-pill" id="saveHistoryBtn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v10l4 4"/><circle cx="12" cy="12" r="10"/></svg>
            히스토리 저장
          </button>
          <button class="action-pill" id="addFavBtn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
            즐겨찾기 추가
          </button>
          <button class="action-pill" id="shareBtn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
            공유
          </button>
        </div>
      </div>

      <div class="cards-grid" id="cardsGrid">
        <!-- Cards generated by JS -->
      </div>

      <!-- Vocab Flashcard -->
      <div class="vocab-section" id="vocabSection" style="display:none">
        <div class="vocab-header">
          <h3 class="vocab-title">📖 단어 카드</h3>
          <button class="vocab-nav" id="prevVocab">‹</button>
          <span class="vocab-count" id="vocabCount">1 / 1</span>
          <button class="vocab-nav" id="nextVocab">›</button>
        </div>
        <div class="vocab-card" id="vocabCard">
          <div class="vocab-front" id="vocabFront"></div>
          <div class="vocab-back" id="vocabBack"></div>
        </div>
      </div>
    </section>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display:none">
      <div class="spinner"></div>
      <p>번역 중...</p>
    </div>

  </main>

  <!-- ===== SIDE PANELS ===== -->

  <!-- History Panel -->
  <aside class="side-panel" id="historyPanel">
    <div class="panel-header">
      <h3>🕐 번역 히스토리</h3>
      <button class="panel-close" id="historyClose">✕</button>
    </div>
    <div class="panel-body" id="historyList">
      <p class="empty-msg">아직 번역 기록이 없습니다.</p>
    </div>
    <button class="clear-btn" id="clearHistory">전체 삭제</button>
  </aside>

  <!-- Favorites Panel -->
  <aside class="side-panel" id="favPanel">
    <div class="panel-header">
      <h3>⭐ 즐겨찾기</h3>
      <button class="panel-close" id="favClose">✕</button>
    </div>
    <div class="panel-body" id="favList">
      <p class="empty-msg">저장된 즐겨찾기가 없습니다.</p>
    </div>
    <button class="clear-btn" id="clearFav">전체 삭제</button>
  </aside>

  <!-- Panel Backdrop -->
  <div class="backdrop" id="backdrop"></div>

  <!-- Toast Notification -->
  <div class="toast" id="toast"></div>

  <!-- Share Modal -->
  <div class="modal-overlay" id="shareModal" style="display:none">
    <div class="modal">
      <div class="modal-header">
        <h3>🔗 번역 결과 공유</h3>
        <button class="modal-close" id="shareClose">✕</button>
      </div>
      <div class="modal-body">
        <p class="modal-label">공유 링크</p>
        <div class="share-url-row">
          <input type="text" id="shareUrl" class="share-url-input" readonly />
          <button class="copy-share-btn" id="copyShareBtn">복사</button>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
